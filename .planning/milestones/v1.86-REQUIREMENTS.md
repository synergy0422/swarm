# Requirements Archive: v1.86 主控自动救援闭环 + 状态汇总表

**Archived:** 2026-02-04
**Status:** ✅ SHIPPED

This is the archived requirements specification for v1.86.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## v1.86 Requirements

### Master 自动救援闭环

- [x] **RESCUE-01**: Master 扫描 tmux pane 输出时，自动判断 WAIT/confirm/press-enter 等等待状态
- [x] **RESCUE-02**: 自动执行 send-keys Enter 进行安全确认
- [x] **RESCUE-03**: 具备冷却时间（建议 30s/窗口），避免重复确认
- [x] **RESCUE-04**: 严格白名单逻辑，不做危险操作（检测 rm -rf, DROP 等立即告警）

### 状态汇总表

- [x] **RESCUE-05**: 每次扫描生成一张"窗口/状态/当前任务/备注"的简表
- [x] **RESCUE-06**: 与文档中"指挥官汇报格式"对齐
- [x] **RESCUE-07**: 能区分 ERROR / WAIT / DONE / RUNNING 状态
- [x] **RESCUE-08**: 状态优先级：ERROR > WAIT > RUNNING > DONE/IDLE

### 技术集成

- [x] **RESCUE-09**: 复用 swarm/master.py 中的 PaneScanner 与 WaitDetector
- [x] **RESCUE-10**: 复用 scripts/claude_auto_rescue.sh 的"安全确认"理念
- [x] **RESCUE-11**: 统一走 swarm/status_broadcaster.py 输出状态日志
- [x] **RESCUE-12**: 所有新增逻辑必须有清晰函数封装，避免在主循环里写过多内联逻辑
- [x] **RESCUE-13**: 冷却时间、扫描频率可配置（用环境变量）

### Out of Scope

| Feature | Reason |
|---------|--------|
| Web 监控 | 不引入 Web 服务和远程控制 |
| 跨机器控制 | 保持同机 Linux/tmux 架构 |
| 修改核心协议 | 不改动现有 CLI 行为 |
| 自动调度系统 | 本版本不引入任务自动调度 |

---

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| RESCUE-01 | 24 | Complete |
| RESCUE-02 | 24 | Complete |
| RESCUE-03 | 24 | Complete |
| RESCUE-04 | 24 | Complete |
| RESCUE-05 | 25 | Complete |
| RESCUE-06 | 25 | Complete |
| RESCUE-07 | 25 | Complete |
| RESCUE-08 | 25 | Complete |
| RESCUE-09 | 26 | Complete |
| RESCUE-10 | 26 | Complete |
| RESCUE-11 | 26 | Complete |
| RESCUE-12 | 26 | Complete |
| RESCUE-13 | 26 | Complete |

---

## Milestone Summary

**Shipped:** 13 of 13 requirements
**Adjusted:** None
**Dropped:** None

---

_Archived: 2026-02-04 as part of v1.86 milestone completion_
