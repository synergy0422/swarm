---
phase: 24-swarm_tasks_bridge_sh
plan: 02
type: execute
wave: 2
depends_on:
  - 24-01
files_modified:
  - /home/user/projects/AAA/swarm/README.md
  - /home/user/projects/AAA/swarm/docs/SCRIPTS.md
autonomous: true
must_haves:
  truths:
    - "README.md contains 'Claude Tasks 协作流程' section with usage examples"
    - "docs/SCRIPTS.md contains complete swarm_tasks_bridge.sh documentation"
  artifacts:
    - path: "/home/user/projects/AAA/swarm/README.md"
      section: "Claude Tasks 协作流程"
      contains:
        - claim/done/fail commands
        - usage examples
        - exit code documentation
    - path: "/home/user/projects/AAA/swarm/docs/SCRIPTS.md"
      section: "swarm_tasks_bridge.sh"
      contains:
        - all parameters
        - all options
        - examples
        - dependencies
---

<objective>
Update documentation to include the new `swarm_tasks_bridge.sh` script documentation.

**Purpose:** Document the new CLAUDE_CODE_TASK_LIST_ID bridge script for users who want to integrate with external task systems.

**Output:**
- README.md with "Claude Tasks 协作流程" section
- docs/SCRIPTS.md with complete script documentation
</objective>

<execution_context>
@/home/user/.claude/get-shit-done/workflows/execute-plan.md
</execution_context>

<context>
@/home/user/projects/AAA/swarm/.planning/phases/24-swarm_tasks_bridge_sh/24-01-PLAN.md
@/home/user/projects/AAA/swarm/scripts/swarm_tasks_bridge.sh (created by plan 01)
@/home/user/projects/AAA/swarm/README.md
@/home/user/projects/AAA/swarm/docs/SCRIPTS.md

Documentation structure follows existing patterns:
- README.md: New section after "诊断快照" section
- SCRIPTS.md: New entry under "任务管理脚本" section
</context>

<tasks>

<task type="auto">
  <name>Update README.md with Claude Tasks 协作流程 section</name>
  <files>/home/user/projects/AAA/swarm/README.md</files>
  <action>
    Add new section "Claude Tasks 协作流程" after the "诊断快照" section.

    Include:
    1. Section header and brief description
    2. Architecture diagram showing bridge script in task workflow
    3. Command reference (claim/done/fail with parameters)
    4. Exit code documentation table
    5. Complete workflow example (CLAUDE_CODE_TASK_LIST_ID integration)
    6. Example commands for claim → work → done/fail flow

    Reference the existing "诊断快照" section for formatting style.
  </action>
  <verify>
    grep -n "Claude Tasks 协作流程" README.md
    grep -n "swarm_tasks_bridge.sh" README.md
  </verify>
  <done>
    README.md contains "Claude Tasks 协作流程" section with complete documentation
  </done>
</task>

<task type="auto">
  <name>Update SCRIPTS.md with swarm_tasks_bridge.sh documentation</name>
  <files>/home/user/projects/AAA/swarm/docs/SCRIPTS.md</files>
  <action>
    Add new entry "swarm_tasks_bridge.sh" under the "任务管理脚本" section.

    Include:
    1. Script purpose (CLAUDE_CODE_TASK_LIST_ID bridge for lock/state integration)
    2. Parameters table (claim/done/fail with arguments)
    3. Options table (if any global options)
    4. Examples section with:
       - Basic claim/done workflow
       - Fail with reason
       - Custom lock_key usage
    5. Dependencies section (_common.sh, swarm_lock.sh, swarm_status_log.sh)

    Reference existing `swarm_task_wrap.sh` documentation for structure.
  </action>
  <verify>
    grep -n "swarm_tasks_bridge.sh" docs/SCRIPTS.md
    grep -n "CLAUDE_CODE_TASK_LIST_ID" docs/SCRIPTS.md
  </verify>
  <done>
    SCRIPTS.md contains complete swarm_tasks_bridge.sh documentation
  </done>
</task>

<task type="auto">
  <name>Add swarm_tasks_bridge.sh to Script Index in README</name>
  <files>/home/user/projects/AAA/swarm/README.md</files>
  <action>
    Add `swarm_tasks_bridge.sh` to the "Command Mapping" table.

    Use consistent naming: `swarm tasks-bridge` (matches swarm task-wrap / swarm selfcheck pattern).

    Add entry:
    | `swarm tasks-bridge` | `swarm_tasks_bridge.sh` | CLAUDE_CODE_TASK_LIST_ID bridge for lock/state operations |
  </action>
  <verify>
    grep "swarm tasks-bridge" README.md
    grep "swarm_tasks_bridge.sh" README.md | grep -v "^#"
  </verify>
  <done>
    README.md Command Mapping table includes swarm_tasks_bridge.sh entry
  </done>
</task>

</tasks>

<verification>
## Documentation Review

1. Check README.md structure:
   ```bash
   grep -A 50 "Claude Tasks 协作流程" README.md | head -60
   ```

2. Check SCRIPTS.md structure:
   ```bash
   grep -A 50 "swarm_tasks_bridge.sh" docs/SCRIPTS.md | head -60
   ```

3. Check command mapping in README:
   ```bash
   grep "swarm.*tasks-bridge\|swarm_tasks_bridge" README.md
   ```
</verification>

<success_criteria>
1. **README.md Complete**
   - Contains "Claude Tasks 协作流程" section with usage examples
   - Command Mapping table includes `swarm tasks-bridge` entry

2. **SCRIPTS.md Complete**
   - Contains full `swarm_tasks_bridge.sh` documentation
   - Includes parameters, examples, and dependencies

3. **Documentation Cross-References**
   - README section references the script file
   - SCRIPTS entry follows existing format
</success_criteria>

<output>
After completion, create `.planning/phases/24-swarm_tasks_bridge_sh/24-02-SUMMARY.md`
</output>
